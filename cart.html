<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - DabbeWale</title>
    <link rel="stylesheet" href="frontend/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="accent-bar"></div>
    <header>
        <nav class="main-navbar improved-navbar">
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="order-placement.html">Order More</a>
            </div>
        </nav>
        <style>
        .improved-navbar {
            background: linear-gradient(90deg, #f9fbe7 60%, #e0f2f1 100%);
            box-shadow: 0 2px 16px rgba(56,142,60,0.10);
            border-radius: 18px;
            margin: 1.5rem auto 2.5rem auto;
            max-width: 950px;
            padding: 0.7em 2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .improved-navbar .nav-links {
            display: flex;
            gap: 2.2em;
            width: 100%;
            justify-content: center;
        }
        .improved-navbar .nav-links a {
            color: #388e3c;
            font-size: 1.25rem;
            font-weight: 600;
            text-decoration: none;
            padding: 0.5em 1.1em;
            border-radius: 8px;
            transition: background 0.18s, color 0.18s, box-shadow 0.18s;
            position: relative;
        }
        .improved-navbar .nav-links a:hover,
        .improved-navbar .nav-links a:focus {
            background: #e0f2f1;
            color: #1b5e20;
            box-shadow: 0 2px 8px rgba(56,142,60,0.10);
        }
        .improved-navbar .nav-links a.active {
            background: #388e3c;
            color: #fff;
            box-shadow: 0 2px 12px rgba(56,142,60,0.13);
        }
        /* Mobile Responsive Styles */
        @media (max-width: 1024px) {
            .improved-navbar {
                max-width: 95%;
                padding: 0.7em 1.5em;
            }
        }
        
        @media (max-width: 768px) {
            .improved-navbar {
                margin: 1rem auto 1.5rem auto;
                padding: 0.7rem 1rem;
                max-width: 95%;
            }
            
            .improved-navbar .nav-links {
                gap: 1.2em;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .improved-navbar .nav-links a {
                font-size: 1.1rem;
                padding: 0.4em 0.8em;
            }
        }
        
        @media (max-width: 700px) {
            .improved-navbar {
                padding: 0.7em 0.5em;
                max-width: 99vw;
            }
            .improved-navbar .nav-links {
                gap: 0.7em;
            }
            .improved-navbar .nav-links a {
                font-size: 1.05rem;
                padding: 0.5em 0.6em;
            }
        }
        
        </style>
    </header>

    <main style="max-width: 1000px; margin: 0 auto; padding: 0 20px 40px 20px;">
        <h1 style="text-align:center; color:#2e7d32;">Your Cart</h1>

        <div id="cart-container" style="display:grid; grid-template-columns: 1fr 0.9fr; gap:20px; align-items:start;">
            <section id="cart-items" style="background:#fff; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,0.08); padding:16px; min-height:200px;"></section>
            <aside style="background:#fff; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,0.08); padding:16px; display:grid; gap:12px;">
                <div style="display:flex; justify-content:space-between; font-weight:800; color:#2e7d32;">
                    <span>Subtotal</span>
                    <span id="cart-subtotal">₹0</span>
                </div>
                <button id="clear-cart" style="padding:10px; background:#f5f5f5; border:none; border-radius:8px; cursor:pointer;">Clear Cart</button>
                <div style="display:grid; gap:10px;">
                    <label style="font-weight:700; color:#333;">Delivery Address</label>
                    <input id="d-addr-street" type="text" placeholder="House no, Street, Area" style="padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                    <div style="display:flex; gap:10px;">
                        <input id="d-addr-city" type="text" placeholder="City" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                        <input id="d-addr-state" type="text" placeholder="State" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                        <input id="d-addr-pincode" type="text" placeholder="Pincode" style="width:140px; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                    </div>
                    <label for="d-allergy-notes" style="font-weight:700; color:#333;">Allergies / Special Instructions</label>
                    <textarea id="d-allergy-notes" rows="3" placeholder="e.g., Allergy to peanuts, less spicy" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem; resize:vertical;"></textarea>
                    <label style="font-weight:700; color:#333;">Payment Method</label>
                    <select id="d-payment-method" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
                        <option value="cod">Cash on Delivery</option>
                        <option value="upi">UPI</option>
                        <option value="qr">Scan QR</option>
                        <option value="card">Card</option>
                    </select>
                    <div id="d-payment-details" style="display:none;">
                        <div id="d-upi-details" style="display:none;">
                            <label for="d-upi-id" style="display:block; margin-bottom:8px; font-weight:600; color:#333;">Enter UPI ID</label>
                            <input id="d-upi-id" type="text" placeholder="yourname@bank" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                        </div>
                        <div id="d-qr-details" style="display:none;">
                            <div style="padding:12px; border:1px dashed #bbb; border-radius:10px; text-align:center; color:#555;">
                                <div style="font-weight:700; margin-bottom:6px;">Scan QR to Pay (Demo)</div>
                                <div id="d-qr-amount" style="margin-bottom:10px;">Amount: <strong><span>₹0</span></strong></div> 
                                <div style="height:160px; width:160px; margin:0 auto 10px auto; border-radius:8px; display:flex; align-items:center; justify-content:center; color:#999; font-weight:700;">
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=DabbeWaleDemoPayment" alt="Demo QR Code" style="width:100%; height:100%; object-fit:contain; border-radius:8px;">
                                </div>
                                <small>This is a demo placeholder.</small>
                            </div>
                        </div>
                        <div id="d-card-details" style="display:none;">
                            <div style="display:grid; gap:10px;">
                                <input id="d-card-number" type="text" placeholder="Card number" style="padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                                <div style="display:flex; gap:10px;">
                                    <input id="d-card-expiry" type="text" placeholder="MM/YY" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                                    <input id="d-card-cvv" type="text" placeholder="CVV" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="place-order-btn" id="place-order-btn" onclick="placeOrder()" style="margin-top:6px;">Place Order</button>
                </div>
            </aside>
        </div>

        <div class="empty-cart" id="empty-cart" style="display:none;">
            <h3>No items in cart</h3>
            <p>Add items from the providers page to place an order</p>
        </div>
    </main>

    <script src="frontend/js/notifications.js"></script>
    <script src="frontend/js/order-placement.js"></script>

    <!-- Order Placed Popup -->
    <div id="order-popup" style="display:none;position:fixed;inset:0;z-index:1000;
      background:rgba(0,0,0,0.5);justify-content:center;align-items:center;">
      <div style="background:#fff;padding:25px;border-radius:10px;text-align:center;
        max-width:350px;width:90%;box-shadow:0 4px 15px rgba(0,0,0,0.2);">
    <h2 style="color:#4caf50;">✅ Order Placed!</h2>
    <p>Coming right to you!</p>
    <button onclick="togglePopup(false); window.location.href='index.html';"
    style="margin-top:15px;padding:8px 18px;border:none;
    background:#4caf50;color:#fff;border-radius:5px;cursor:pointer;">
    Okay
    </button>
      </div>
    </div>
    
    <script>
        function togglePopup(show, orderDetails = {}) {
          const popup = document.getElementById("order-popup");
          if (popup) popup.style.display = show ? "flex" : "none";
          console.log(`togglePopup called for element #${popup ? 'order-popup' : 'NOT_FOUND'} with display=${show ? 'flex' : 'none'}`);
        }
    </script>
</body>
</html>
